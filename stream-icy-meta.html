<!-- Include la libreria stream-icy-meta (esempio da CDN) -->
<script src="https://cdn.jsdelivr.net/npm/stream-icy-meta/dist/stream-icy-meta.min.js"></script>

<div style="margin-top:20px; font-size:20px; color:#FFCD00; font-family: Playball;">
  <span id="npArtist"></span> – <span id="npSong"></span>
</div>

<script>
  const streamUrl = 'https://stream-174.zeno.fm/rtndtqysyq5tv?zt=eyJhbGciOiJIUzI1NiJ9.eyJzdHJlYW0iOiJydG5kdHF5c3lxNXR2IiwiaG9zdCI6InN0cmVhbS0xNzQuemVuby5mbSIsInRtIjpmYWxzZSwicnR0bCI6NSwianRpIjoiUDc0OXlVNmpTWlNKd3V1amM2d1VOdyIsImlhdCI6MTc1MTc0NDY2MSwiZXhwIjoxNzUxNzQ0NzIxfQ.fwUeHDb3WWelcizyqXBj6T2So1N9dh3sX6G9haDpmgU'; // URL stream audio mp3 con metadata ICY
  const artistEl = document.getElementById('npArtist');
  const songEl = document.getElementById('npSong');

  const icy = new StreamIcyMeta(streamUrl);

  icy.on('metadata', meta => {
    // meta.title contiene stringa tipo "Artista – Titolo"
    const parts = meta.title.split(' – ');
    artistEl.textContent = parts[0]?.trim() || '';
    songEl.textContent = parts[1]?.trim() || meta.title;
  });

  icy.on('error', err => {
    console.error('Errore stream-icy-meta:', err);
  });

  icy.start(); // avvia la connessione e il parsing dei metadata
</script>
